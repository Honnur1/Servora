{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Payment | Servora</title>

    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
    <link rel="stylesheet" href="{% static 'css/payment.css' %}">
    
</head>
<body>

<div class="payment-box">
    <h2>Total Amount</h2>
    <h1>â‚¹{{ total_price }}</h1>
    <button id="rzp-button1">Proceed to Pay</button>
</div>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<script>
document.getElementById('rzp-button1').onclick = function(e) {

    var options = {
        "key": "{{ razorpay_key }}",
        "amount": "{{ payment.amount|default:0 }}",
        "currency": "INR",
        "name": "Servora",
        "description": "Food Order Payment",
        "order_id": "{{ payment.id|default:'' }}",

        // ðŸ”¥ Enable specific payment methods
        "method": {
            "upi": true,
            "card": true,
            "netbanking": true,
            "wallet": true
        },

        // ðŸ”¥ UPI specific configuration
        "upi": {
            "flow": "intent"   // Enables Google Pay / PhonePe on mobile
        },

        "handler": function (response){
            window.location.href = "/confirm-payment/?payment_id=" 
            + response.razorpay_payment_id;
        },

        "theme": {
            "color": "#F37254"
        }
    };

    var rzp = new Razorpay(options);
    rzp.open();

    e.preventDefault();
}
</script>

</body>
</html>